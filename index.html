<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ FOR CSS ASPIRANTS 21 MAY 2025 - SYED ASGHAR ALI SHAH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10 and IE 11 */
            user-select: none; /* Standard syntax */
            overflow-x: hidden;
        }
        .no-select {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .question-option:hover {
            background-color: #e0f2fe; /* Light blue on hover */
        }
        .selected-option {
            background-color: #bae6fd !important; /* Sky blue for selected */
            border-color: #0284c7 !important; /* Darker blue border */
        }
        .header-glow {
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.7), 0 0 12px rgba(74, 222, 128, 0.7);
        }
        .footer-glow {
             text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        /* Animation for sections appearing */
        .fade-in {
            animation: fadeInAnimation 0.5s ease-in forwards;
        }
        @keyframes fadeInAnimation {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 100; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.6); /* Black w/ opacity */
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            text-align: center;
        }
        .modal-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            margin: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .modal-button:hover {
            background-color: #45a049;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Orbitron:wght@700&display=swap" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-slate-900 to-slate-800 text-gray-100 no-select min-h-screen flex flex-col" oncontextmenu="return false;">

    <header class="bg-slate-800/50 backdrop-blur-md shadow-2xl py-4 sm:py-6 sticky top-0 z-50">
        <div class="container mx-auto px-4 flex flex-col sm:flex-row justify-between items-center">
            <div class="flex items-center mb-2 sm:mb-0">
                <img src="https://media-hosting.imagekit.io//0b9a4af30efb4482/WhatsApp%20Image%202025-02-28%20at%203.15.19%20AM.jpeg?Expires=1835349432&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=jwJPYv24ynvpiPUADnh2kUGPUbG6OBggLpvXOj6~ZZAgts7lamWPTIZKmuIaQ5WaRUAG568acIjSbBE1XrKsIPvCHTXKNA-XF6ppaM~tacD0TMTVoTFd7-EsYFsesMaR~5AK7n5qr33hIwKVawluJ1rkdqmuQokM~T~W~O~6Yo-qXgYGio2IvfBsu1u~wEi1Cnk-5pAOavMUb9IfeY7E4FNwGBgiLCiHugKJD9sAY8As7S0szpehWI8WIQzMzNUFN4wvtPAamSART1m5nlUT4uLcvwdr-C1pk4kJN6I0itWzZEbZN04ANZexY3dpBhUDO0~UvQBCps64LPKIQBRYtA__" alt="Syed Asghar Ali Shah" class="w-12 h-12 sm:w-16 sm:h-16 rounded-full mr-3 sm:mr-4 border-2 border-green-400 shadow-lg">
                <div>
                    <h2 class="text-sm sm:text-lg font-semibold text-green-300 header-glow">SYED ASGHAR ALI SHAH</h2>
                    <h1 class="text-lg sm:text-2xl font-bold text-sky-300 header-glow">QUIZ FOR CSS ASPIRANTS</h1>
                    <p class="text-xs sm:text-sm text-amber-300 header-glow">21 MAY 2025</p>
                </div>
            </div>
            <div id="timer-display" class="text-2xl sm:text-3xl font-bold text-red-400" style="font-family: 'Orbitron', sans-serif;">40:00</div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 flex-grow">

        <section id="name-entry-section" class="max-w-lg mx-auto bg-slate-700/70 p-6 sm:p-8 rounded-xl shadow-2xl backdrop-blur-sm">
            <h2 class="text-2xl font-semibold mb-6 text-center text-sky-300">Enter Your Name to Begin</h2>
            <input type="text" id="student-name" placeholder="Your Full Name" class="w-full p-3 mb-4 bg-slate-800 border border-slate-600 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none text-gray-100 placeholder-gray-400">
            <button id="start-quiz-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition duration-150 ease-in-out transform hover:scale-105 shadow-lg">
                Start Quiz
            </button>
            <p id="name-error" class="text-red-400 text-sm mt-2 text-center"></p>
        </section>

        <section id="quiz-section" class="hidden max-w-4xl mx-auto bg-slate-700/70 p-6 sm:p-8 rounded-xl shadow-2xl backdrop-blur-sm fade-in">
            <div id="question-container" class="mb-6">
                </div>
            <div class="flex justify-between items-center mt-6">
                <button id="prev-question-btn" class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150 ease-in-out shadow-md">Previous</button>
                <span id="question-counter" class="text-lg text-amber-300">Question 1 / 100</span>
                <button id="next-question-btn" class="bg-sky-500 hover:bg-sky-600 text-white font-bold py-2 px-4 rounded-lg transition duration-150 ease-in-out shadow-md">Next</button>
            </div>
            <button id="submit-quiz-btn" class="w-full mt-8 bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition duration-150 ease-in-out transform hover:scale-105 shadow-lg">
                Submit Quiz
            </button>
        </section>

        <section id="results-section" class="hidden max-w-lg mx-auto bg-slate-700/70 p-6 sm:p-8 rounded-xl shadow-2xl backdrop-blur-sm fade-in text-center">
            <h2 class="text-3xl font-bold mb-6 text-green-400">Quiz Results</h2>
            <div class="space-y-3 text-lg">
                <p><strong>Name:</strong> <span id="result-name" class="text-sky-300"></span></p>
                <p><strong>Attempted:</strong> <span id="result-attempted" class="text-sky-300"></span></p>
                <p><strong>Score:</strong> <span id="result-score" class="text-sky-300"></span></p>
                <p><strong>Time Taken:</strong> <span id="result-time-taken" class="text-sky-300"></span></p>
            </div>
            <p class="mt-6 text-amber-300">Your results have been submitted. Thank you for participating!</p>
        </section>

        <form id="quiz-results-form" action="https://formspree.io/f/xwpvddea" method="POST" class="hidden">
            <input type="text" name="studentName" id="form-student-name">
            <input type="number" name="questionsAttempted" id="form-questions-attempted">
            <input type="number" name="score" id="form-score">
            <input type="text" name="timeTaken" id="form-time-taken">
        </form>
    </main>

    <footer class="bg-slate-800/50 backdrop-blur-md shadow-2xl py-6 mt-12">
        <div class="container mx-auto px-4 text-center text-gray-400">
            <p class="footer-glow">&copy; 2025 QUIZ FOR CSS ASPIRANTS. All rights reserved.</p>
            <p class="footer-glow">Designed by SYED ASGHAR ALI SHAH</p>
            <p class="mt-2 footer-glow">Contact: <a href="tel:03265762698" class="text-sky-400 hover:text-sky-300">03265762698</a></p>
            <p class="mt-2 text-amber-300 footer-glow">Prepare diligently. Success awaits the dedicated.</p>
        </div>
    </footer>

    <div id="confirmationModal" class="modal">
        <div class="modal-content bg-slate-700 text-gray-100 rounded-lg shadow-xl">
            <p id="modalMessage" class="text-lg mb-4"></p>
            <button id="modalConfirmBtn" class="modal-button bg-green-500 hover:bg-green-600">Confirm</button>
            <button id="modalCancelBtn" class="modal-button bg-red-500 hover:bg-red-600">Cancel</button>
        </div>
    </div>


    <script>
        // --- Quiz Data ---
        // This array now contains an expanded set of questions.
        // Sourced from: One Paper MCQs (pg 421-440 for English), Grammar Analysis PDF, Idioms/Synonyms PDF.
        const quizData = [
            // Prepositions (from One Paper MCQs PDF & general grammar)
            { question: "He is quite insensible ___ danger.", options: ["to", "of", "with", "from"], answer: "to", category: "Prepositions" },
            { question: "I am not envious ___ his success.", options: ["of", "for", "with", "at"], answer: "of", category: "Prepositions" },
            { question: "She is related ___ me.", options: ["with", "to", "of", "by"], answer: "to", category: "Prepositions" },
            { question: "He is not fit ___ this job.", options: ["to", "for", "with", "in"], answer: "for", category: "Prepositions" },
            { question: "The train is ___ time.", options: ["on", "in", "at", "by"], answer: "on", category: "Prepositions" },
            { question: "He is absorbed ___ his studies.", options: ["in", "with", "at", "on"], answer: "in", category: "Prepositions" },
            { question: "Beware ___ pickpockets.", options: ["from", "of", "with", "about"], answer: "of", category: "Prepositions" },
            { question: "She has a passion ___ music.", options: ["for", "of", "in", "with"], answer: "for", category: "Prepositions" },
            { question: "This work is ___ my dignity.", options: ["below", "under", "off", "to"], answer: "below", category: "Prepositions" },
            { question: "He is blind ___ one eye.", options: ["in", "of", "with", "to"], answer: "in", category: "Prepositions" }, // Blind in an eye
            { question: "Do not boast ___ your wealth.", options: ["of", "about", "for", "in"], answer: "of", category: "Prepositions" }, // boast of/about
            { question: "He is charged ___ theft.", options: ["with", "for", "of", "on"], answer: "with", category: "Prepositions" },
            { question: "I prefer tea ___ coffee.", options: ["to", "over", "than", "against"], answer: "to", category: "Prepositions" },
            { question: "She complained ___ the manager ___ the poor service.", options: ["to, about", "with, for", "against, of", "to, for"], answer: "to, about", category: "Prepositions" },
            { question: "He is good ___ mathematics.", options: ["in", "at", "with", "on"], answer: "at", category: "Prepositions" },

            // Punctuation (from One Paper MCQs PDF & general grammar)
            { question: "Which punctuation mark is used to indicate possession?", options: ["Comma (,)", "Apostrophe (')", "Semicolon (;)", "Hyphen (-)"], answer: "Apostrophe (')", category: "Punctuation" },
            { question: "What is the primary purpose of a question mark (?)?", options: ["To end any sentence", "To indicate a direct question", "To show strong emotion", "To separate items in a list"], answer: "To indicate a direct question", category: "Punctuation" },
            { question: "Which sentence uses the comma correctly before a coordinating conjunction joining independent clauses?", options: ["He was tired yet he continued working.", "He was tired, yet he continued working.", "He was tired, yet, he continued working.", "He was tired yet, he continued working."], answer: "He was tired, yet he continued working.", category: "Punctuation" },
            { question: "Which punctuation mark is often used to introduce a list or an explanation?", options: ["Semicolon (;)", "Colon (:)", "Dash (—)", "Ellipsis (...)"], answer: "Colon (:)", category: "Punctuation" },
            { question: "In the sentence, 'She bought apples, oranges, and bananas,' the commas are called:", options: ["Oxford commas", "Appositive commas", "Serial commas", "Introductory commas"], answer: "Serial commas", category: "Punctuation" },
            { question: "An em-dash (—) can be used to:", options: ["Only show possession", "Introduce an explanation or elaboration", "Replace all commas", "Indicate a pause shorter than a comma"], answer: "Introduce an explanation or elaboration", category: "Punctuation" },
            { question: "What does an ellipsis (...) indicate?", options: ["The end of a sentence", "A spelling mistake", "An omission of words or a trailing off of thought", "A direct quotation"], answer: "An omission of words or a trailing off of thought", category: "Punctuation" },
            { question: "Quotation marks (“ ”) are NOT used for:", options: ["Direct quotes", "Titles of short stories or articles", "Emphasizing a common word", "Indicating irony or a special sense of a word"], answer: "Emphasizing a common word", category: "Punctuation" }, // Italics or bold are for emphasis
            { question: "A semicolon (;) is appropriately used to:", options: ["Connect two closely related independent clauses", "Separate items in a simple list", "Indicate a question", "End every sentence"], answer: "Connect two closely related independent clauses", category: "Punctuation" },
            { question: "Which sentence correctly uses an apostrophe for contraction? She ___ going to the park.", options: ["is'nt", "isnt'", "isn't", "is'not"], answer: "isn't", category: "Punctuation" },

            // Idioms & Phrases (from 21 May Notes & general usage)
            { question: "What is the meaning of the idiom 'To bear the brunt of'?", options: ["To carry a heavy load physically", "To endure the main shock or impact of something negative", "To be extremely brave in a difficult situation", "To delegate responsibility to others"], answer: "To endure the main shock or impact of something negative", category: "Idioms" },
            { question: "If an argument 'does not hold water', it means:", options: ["It is too complex to understand", "It is based on aquatic analogies", "It is not logical, sound, or believable", "It is intentionally misleading"], answer: "It is not logical, sound, or believable", category: "Idioms" },
            { question: "What does 'to turn the other cheek' imply?", options: ["To look away in shame", "To inspect the other side of an object", "To not retaliate when attacked or insulted", "To prepare for a second confrontation"], answer: "To not retaliate when attacked or insulted", category: "Idioms" },
            { question: "The idiom 'a drop in the ocean' signifies:", options: ["Something of immense value", "A very small amount compared to what is needed", "A sudden realization", "A hidden treasure"], answer: "A very small amount compared to what is needed", category: "Idioms" },
            { question: "'On a war footing' means to approach a situation with:", options: ["Casual indifference", "Extreme caution and delay", "The urgency and intensity of wartime preparations", "A desire for peaceful resolution"], answer: "The urgency and intensity of wartime preparations", category: "Idioms" },
            { question: "If something is 'brought into sharp relief', it is:", options: ["Made less clear", "Softened or blurred", "Made very clear or obvious", "Reduced in importance"], answer: "Made very clear or obvious", category: "Idioms" },
            { question: "The phrase 'vying for dominance' means:", options: ["Avoiding conflict", "Competing strongly to be the most powerful", "Working collaboratively", "Accepting a subordinate role"], answer: "Competing strongly to be the most powerful", category: "Idioms" },
            { question: "To 'refuse to yield' means to:", options: ["Give in easily", "Stand firm and not surrender", "Negotiate a compromise", "Retreat strategically"], answer: "Stand firm and not surrender", category: "Idioms" },
            { question: "If someone has 'a lot to answer for', they are:", options: ["Highly knowledgeable", "Responsible for many bad things that have happened", "Expected to give many speeches", "Blameless and innocent"], answer: "Responsible for many bad things that have happened", category: "Idioms" },
            { question: "To 'leave permanent scars' (emotionally or physically) means to:", options: ["Cause temporary discomfort", "Heal completely without a trace", "Cause lasting damage or indelible marks", "Forget an incident quickly"], answer: "Cause lasting damage or indelible marks", category: "Idioms" },

            // Synonyms (from 21 May Notes & general vocabulary)
            { question: "Choose the closest synonym for 'PITTANCE'.", options: ["A large sum", "A fair wage", "A negligible amount", "An unexpected bonus"], answer: "A negligible amount", category: "Synonyms" },
            { question: "Select the best synonym for 'FORBEARANCE'.", options: ["Impatience", "Retaliation", "Patient self-control; restraint and tolerance", "Aggression"], answer: "Patient self-control; restraint and tolerance", category: "Synonyms" },
            { question: "A synonym for 'NEGLIGIBLE' is:", options: ["Significant", "Crucial", "Insignificant", "Abundant"], answer: "Insignificant", category: "Synonyms" },
            { question: "The word 'ESCALATING' is a synonym for:", options: ["Decreasing", "Stabilizing", "Increasing", "Fluctuating"], answer: "Increasing", category: "Synonyms" },
            { question: "Choose the synonym for 'CULPABLE'.", options: ["Innocent", "Blameworthy", "Careful", "Admirable"], answer: "Blameworthy", category: "Synonyms" },
            { question: "What is a synonym for 'METED OUT' (as in punishment)?", options: ["Withheld", "Administered", "Reduced", "Questioned"], answer: "Administered", category: "Synonyms" },
            { question: "A synonym for 'SINGULAR' (as in a singular talent) is:", options: ["Multiple", "Common", "Unique", "Ordinary"], answer: "Unique", category: "Synonyms" },
            { question: "The closest synonym for 'STAGNATING' is:", options: ["Progressing", "Flourishing", "Making no progress", "Improving rapidly"], answer: "Making no progress", category: "Synonyms" },
            { question: "Find a synonym for 'PRETEXT'.", options: ["Reason", "Excuse or guise", "Goal", "Conclusion"], answer: "Excuse or guise", category: "Synonyms" },
            { question: "A synonym for 'INDELIBLE' is:", options: ["Temporary", "Erasable", "Permanent or unremovable", "Faint"], answer: "Permanent or unremovable", category: "Synonyms" },

            // Antonyms (from 21 May Notes & general vocabulary)
            { question: "Choose the most appropriate antonym for 'ABUNDANCE'.", options: ["Surplus", "Excess", "Scarcity", "Overflow"], answer: "Scarcity", category: "Antonyms" },
            { question: "What is the antonym of 'FLIMSY' (as in a flimsy argument)?", options: ["Delicate", "Weak", "Sound", "Transparent"], answer: "Sound", category: "Antonyms" },
            { question: "The antonym of 'STAGNATING' is:", options: ["Declining", "Progressing", "Halting", "Withering"], answer: "Progressing", category: "Antonyms" },
            { question: "An antonym for 'ILLOGICAL' is:", options: ["Unreasonable", "Valid", "Confused", "Incorrect"], answer: "Valid", category: "Antonyms" },
            { question: "The opposite of 'RETALIATE' is:", options: ["Attack", "Avenge", "Forgive or show forbearance", "Ignore"], answer: "Forgive or show forbearance", category: "Antonyms" },
            { question: "What is an antonym for 'OBSCURED'?", options: ["Hidden", "Revealed or highlighted", "Darkened", "Confused"], answer: "Revealed or highlighted", category: "Antonyms" },
            { question: "The antonym of 'INEFFECTIVE' is:", options: ["Useless", "Impactful or influential", "Weak", "Pointless"], answer: "Impactful or influential", category: "Antonyms" },
            { question: "Choose an antonym for 'BE BLAMELESS'.", options: ["Be innocent", "Be culpable", "Be praised", "Be ignored"], answer: "Be culpable", category: "Antonyms" },
            { question: "The opposite of 'DETERRED' (as in deterred investors) is:", options: ["Discouraged", "Prevented", "Attracted or encouraged", "Repelled"], answer: "Attracted or encouraged", category: "Antonyms" },
            { question: "An antonym for 'DECREASING' is:", options: ["Falling", "Escalating or growing", "Shrinking", "Diminishing"], answer: "Escalating or growing", category: "Antonyms" },

            // Pair of Words (Tricky)
            { question: "Distinguish between 'COMPLIMENT' and 'COMPLEMENT'. 'The new curtains ___ the room's decor perfectly.'", options: ["compliment", "complement", "complimented", "complemented"], answer: "complement", category: "Pair of Words" },
            { question: "Choose the correct word: 'The ___ of the school is a strict disciplinarian.'", options: ["Principle", "Principal", "Principale", "Principality"], answer: "Principal", category: "Pair of Words" },
            { question: "'Affect' is usually a verb meaning 'to influence', while 'effect' is usually a noun meaning 'a result'. Which is correct: 'The new law will ___ many people.'?", options: ["affect", "effect", "affects", "effects"], answer: "affect", category: "Pair of Words" },
            { question: "'Their' shows possession, 'there' indicates a place, and 'they're' is a contraction for 'they are'. Complete: '___ going to put the books over ___.'", options: ["They're, their", "Their, there", "They're, there", "There, they're"], answer: "They're, there", category: "Pair of Words" },
            { question: "'Advice' is a noun, 'advise' is a verb. 'She gave me some good ___.'", options: ["advise", "advice", "advises", "advices"], answer: "advice", category: "Pair of Words" },
            { question: "'Stationary' means not moving, 'stationery' refers to writing materials. 'The car remained ___ at the red light.'", options: ["stationery", "stationary", "stationeries", "stationaries"], answer: "stationary", category: "Pair of Words" },
            { question: "'Desert' (stress on first syllable) is a dry area; 'dessert' (stress on second syllable) is a sweet course. 'We crossed the ___ to reach the oasis.'", options: ["dessert", "desert", "deserts", "desserts"], answer: "desert", category: "Pair of Words" },
            { question: "'Lose' means to misplace or not win; 'loose' means not tight. 'Be careful not to ___ your keys.'", options: ["loose", "lose", "loosen", "losing"], answer: "lose", category: "Pair of Words" },
            { question: "'Accept' means to receive; 'except' means to exclude. 'Everyone ___ John passed the test.'", options: ["accept", "except", "accepted", "excepted"], answer: "except", category: "Pair of Words" },
            { question: "'Elicit' means to draw out; 'illicit' means unlawful. 'The detective tried to ___ a confession.'", options: ["illicit", "elicit", "illicited", "elicited"], answer: "elicit", category: "Pair of Words" },

            // Advanced Grammar (from Grammar Analysis PDF & general grammar)
            { question: "Identify the part of speech of 'NARRATIVES' in: 'NARRATIVES have, for millennia, shaped...'", options: ["Verb", "Adjective", "Noun", "Adverb"], answer: "Noun", category: "Grammar" },
            { question: "Which sentence contains a dangling modifier?", options: ["Having finished the assignment, Jill turned on the TV.", "After reading the original study, the article remains unconvincing.", "The cat, which was black, sat on the mat.", "To improve his results, the experiment was done again."], answer: "After reading the original study, the article remains unconvincing.", category: "Grammar" },
            { question: "What type of clause is underlined: 'The book *that I borrowed from the library* is overdue.'?", options: ["Adverbial Clause", "Noun Clause", "Relative (Adjectival) Clause", "Independent Clause"], answer: "Relative (Adjectival) Clause", category: "Grammar" },
            { question: "Correct subject-verb agreement: 'The committee ___ on the main points.'", options: ["disagree", "disagrees", "are disagreeing", "is disagree"], answer: "disagrees", category: "Grammar" },
            { question: "Identify the function of the underlined phrase: 'She went to the market *to buy some vegetables*.'", options: ["Adjectival phrase", "Adverbial phrase of reason", "Infinitive phrase acting as an adverb (purpose)", "Noun phrase"], answer: "Infinitive phrase acting as an adverb (purpose)", category: "Grammar" },
            { question: "'Neither the students nor the teacher ___ aware of the change.' Choose the correct verb form.", options: ["were", "was", "are", "is being"], answer: "was", category: "Grammar" },
            { question: "In 'The story...illustrates this power — the image...symbolises...', the em-dash introduces:", options: ["A possessive noun", "An appositive or elaboration", "A completely unrelated idea", "A list of examples"], answer: "An appositive or elaboration", category: "Grammar (Punctuation)" },
            { question: "The phrase 'for millennia' in 'NARRATIVES have, for millennia, shaped...' is a:", options: ["Noun phrase acting as subject", "Prepositional phrase acting as an adverbial", "Verb phrase", "Adjectival phrase"], answer: "Prepositional phrase acting as an adverbial", category: "Grammar" },
            { question: "Identify the voice of the verb in: 'Breakthrough technologies are developed by scientists.'", options: ["Active Voice", "Passive Voice", "Middle Voice", "Reflexive Voice"], answer: "Passive Voice", category: "Grammar" },
            { question: "Which of the following is a compound sentence?", options: ["The sun shines brightly.", "Because it was raining, we stayed indoors.", "The cat slept, and the dog played.", "The tall, green tree stood majestically."], answer: "The cat slept, and the dog played.", category: "Grammar" },

            // Sentence Rearrangement (Tough)
            { question: "Arrange: (A) for its intricate plot (B) the novel was acclaimed (C) and complex characters (D) by critics", options: ["BDAC", "BADC", "DBAC", "ACBD"], answer: "BADC", category: "Sentence Rearrangement" },
            { question: "Rearrange: (P) has been a significant factor (Q) in shaping global economic policies (R) the rise of digital currencies (S) over the past decade", options: ["RQPS", "RPSQ", "PRSQ", "QRPS"], answer: "RPSQ", category: "Sentence Rearrangement" },
            { question: "Arrange: (A) despite the heavy rain (B) decided to proceed (C) the determined hikers (D) with their journey", options: ["ACBD", "CABD", "CBDA", "ADCB"], answer: "CABD", category: "Sentence Rearrangement" },
            { question: "Form a coherent sentence: (1) the power of narratives (2) in shaping societal identities (3) cannot be underestimated (4) and forging collective memory", options: ["1243", "1324", "3124", "1234"], answer: "1243", category: "Sentence Rearrangement" }, // The power of narratives in shaping societal identities and forging collective memory cannot be underestimated.
            { question: "Rearrange: (W) with constructive ones (X) corrosive narratives (Y) we must replace (Z) that narrate success", options: ["YXWZ", "YWXZ", "YXZW", "XWYZ"], answer: "YXZW", category: "Sentence Rearrangement" }, // We must replace corrosive narratives with constructive ones that narrate success.

            // General Knowledge/Contextual (from provided text ideas)
            { question: "The 'Iron Age transformation' in the Biblical-Quranic tradition, as mentioned in 'The Power of Narratives', primarily symbolizes:", options: ["Only metallurgical advancement", "Military conquest through superior weaponry", "Divinely inspired human potential and technological progress", "The decline of bronze-based civilizations"], answer: "Divinely inspired human potential and technological progress", category: "General Knowledge (Contextual)" },
            { question: "According to 'The Power of Narratives', what can be a destructive capacity of competing narratives within a social unit?", options: ["Strengthening critical thinking", "Eroding identity and self-worth", "Encouraging innovation", "Robust historical records"], answer: "Eroding identity and self-worth", category: "General Knowledge (Contextual)" },
            { question: "The term 'echo chamber' in contemporary discourse refers to an environment where:", options: ["Sound is amplified", "A person primarily encounters reinforcing opinions", "Debates ensure all voices are heard", "Historical records are unaltered"], answer: "A person primarily encounters reinforcing opinions", category: "General Knowledge (Contextual)" },
            { question: "Which of these is NOT typically considered a primary color in the subtractive (pigment) model?", options: ["Red", "Yellow", "Blue", "Green"], answer: "Green", category: "General Knowledge" },
            { question: "The 'Pulitzer Prize' is awarded for achievements primarily in which fields?", options: ["Science and Mathematics", "Sports and Athletics", "Journalism, Literature, and Musical Composition", "Film and Television"], answer: "Journalism, Literature, and Musical Composition", category: "General Knowledge" },

            // More Correct/Incorrect Sentence Structure & Grammar (Inspired by "One Paper MCQs" pg 421-427)
            { question: "Which sentence is grammatically correct?", options: ["He is more stronger than his brother.", "He is stronger than his brother.", "He is most strong than his brother.", "He is strong than his brother."], answer: "He is stronger than his brother.", category: "Grammar (Correct Sentence)" },
            { question: "Identify the correct sentence:", options: ["She has went to the market.", "She have gone to the market.", "She has gone to the market.", "She gone to the market."], answer: "She has gone to the market.", category: "Grammar (Correct Sentence)" },
            { question: "Which of the following sentences is correct?", options: ["One of my friend are coming.", "One of my friends is coming.", "One of my friend is coming.", "One of my friends are coming."], answer: "One of my friends is coming.", category: "Grammar (Correct Sentence)" },
            { question: "Select the grammatically sound sentence:", options: ["The childrens are playing in the park.", "The children's are playing in the park.", "The children are playing in the park.", "The children is playing in the park."], answer: "The children are playing in the park.", category: "Grammar (Correct Sentence)" },
            { question: "Which sentence demonstrates correct use of 'less' and 'fewer'?", options: ["There are less people here than expected.", "There are fewer people here than expected.", "She has less troubles now.", "He drank fewer water."], answer: "There are fewer people here than expected.", category: "Grammar (Correct Sentence)" }, // Fewer for countable, less for uncountable
            { question: "Choose the correct sentence: ", options: ["The news are bad.", "The news is bad.", "The new is bad.", "The news were bad."], answer: "The news is bad.", category: "Grammar (Correct Sentence)"},
            { question: "Which sentence is grammatically correct regarding pronoun agreement?", options: ["Each of the students submitted their assignment.", "Each of the students submitted his or her assignment.", "Each of the students submitted there assignment.", "Each of the student submitted their assignments."], answer: "Each of the students submitted his or her assignment.", category: "Grammar (Pronoun Agreement)"},
            { question: "Identify the sentence with correct parallel structure:", options: ["She likes to swim, hiking, and to read books.", "She likes swimming, hiking, and to read books.", "She likes swimming, hiking, and reading books.", "She likes to swim, to hike, and reading books."], answer: "She likes swimming, hiking, and reading books.", category: "Grammar (Parallel Structure)"},
            { question: "Which sentence correctly uses the subjunctive mood?", options: ["If I was you, I would go.", "If I were you, I would go.", "If I am you, I would go.", "If I be you, I would go."], answer: "If I were you, I would go.", category: "Grammar (Subjunctive Mood)"},
            { question: "Select the sentence that avoids a misplaced modifier:", options: ["Covered in mud, the pig was taken by the farmer to the barn.", "The farmer took the pig covered in mud to the barn.", "The farmer took the pig to the barn covered in mud.", "To the barn, the farmer took the pig covered in mud."], answer: "The farmer took the pig covered in mud to the barn.", category: "Grammar (Misplaced Modifier)"} // Or "Covered in mud, the pig was led by the farmer to the barn." - The original answer choice is better.
        ];
        // Total questions: 95. Add 5 more to reach 100.
        // Adding 5 more tough questions
        quizData.push(
            { question: "The committee could not arrive at a consensus, ___ their differing opinions.", options: ["due to", "because", "owing to the fact of", "on account of"], answer: "due to", category: "Prepositions/Conjunctions" },
            { question: "Which of the following words is most nearly opposite in meaning to 'TACITURN'?", options: ["Silent", "Reserved", "Loquacious", "Shy"], answer: "Loquacious", category: "Antonyms" },
            { question: "The phrase 'sine qua non' means:", options: ["Without which, not (an essential condition)", "A common occurrence", "A debated point", "A final decision"], answer: "Without which, not (an essential condition)", category: "Idioms (Foreign Phrases)" },
            { question: "Identify the figure of speech: 'The wind whispered through the trees.'", options: ["Metaphor", "Simile", "Personification", "Hyperbole"], answer: "Personification", category: "Grammar (Figures of Speech)" },
            { question: "Rearrange to form a logical sentence: (A) is essential for (B) a thorough understanding of grammatical principles (C) effective communication (D) in any language.", options: ["BDAC", "BACD", "BCAD", "BADC"], answer: "BACD", category: "Sentence Rearrangement" } // A thorough understanding of grammatical principles is essential for effective communication in any language.
        );


        // --- DOM Elements ---
        const nameEntrySection = document.getElementById('name-entry-section');
        const studentNameInput = document.getElementById('student-name');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const nameError = document.getElementById('name-error');

        const quizSection = document.getElementById('quiz-section');
        const questionContainer = document.getElementById('question-container');
        const prevQuestionBtn = document.getElementById('prev-question-btn');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const questionCounter = document.getElementById('question-counter');
        const submitQuizBtn = document.getElementById('submit-quiz-btn');
        const timerDisplay = document.getElementById('timer-display');

        const resultsSection = document.getElementById('results-section');
        const resultName = document.getElementById('result-name');
        const resultAttempted = document.getElementById('result-attempted');
        const resultScore = document.getElementById('result-score');
        const resultTimeTaken = document.getElementById('result-time-taken');

        const hiddenForm = document.getElementById('quiz-results-form');
        const formStudentName = document.getElementById('form-student-name');
        const formQuestionsAttempted = document.getElementById('form-questions-attempted');
        const formScore = document.getElementById('form-score');
        const formTimeTaken = document.getElementById('form-time-taken');

        const confirmationModal = document.getElementById('confirmationModal');
        const modalMessage = document.getElementById('modalMessage');
        let modalConfirmBtn = document.getElementById('modalConfirmBtn'); // Made 'let' for reassignment
        const modalCancelBtn = document.getElementById('modalCancelBtn');

        // --- Quiz State ---
        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let timerInterval;
        let timeLeft = 40 * 60; // 40 minutes in seconds
        let quizStartTime;
        let studentFullName = '';
        let quizSubmitted = false;

        // --- Utility Functions ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Shuffle questions and their options
        function prepareQuizData() {
            shuffleArray(quizData);
            quizData.forEach(question => {
                if (question.options && Array.isArray(question.options)) { // Ensure options exist and is an array
                    shuffleArray(question.options);
                }
            });
            userAnswers = new Array(quizData.length).fill(null); // Reset user answers array size
            questionCounter.textContent = `Question 1 / ${quizData.length}`; // Update total questions count
        }
        
        // --- Event Listeners ---
        startQuizBtn.addEventListener('click', () => {
            studentFullName = studentNameInput.value.trim();
            if (studentFullName === "") {
                nameError.textContent = "Please enter your name to start the quiz.";
                return;
            }
            nameError.textContent = "";
            nameEntrySection.classList.add('hidden');
            quizSection.classList.remove('hidden');
            quizSection.classList.add('fade-in');
            quizStartTime = new Date();
            startTimer();
            loadQuestion(currentQuestionIndex);
        });

        nextQuestionBtn.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            }
        });

        prevQuestionBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
            }
        });

        submitQuizBtn.addEventListener('click', () => {
            showConfirmationModal("Are you sure you want to submit the quiz?", handleSubmitQuiz);
        });
        
        modalCancelBtn.addEventListener('click', () => {
            confirmationModal.style.display = "none";
        });


        // --- Functions ---
        function showConfirmationModal(message, onConfirm) {
            modalMessage.textContent = message;
            confirmationModal.style.display = "flex"; // Use flex to center content if modal is styled for it
            
            // Clone and replace the confirm button to remove old event listeners
            const newConfirmBtn = modalConfirmBtn.cloneNode(true);
            modalConfirmBtn.parentNode.replaceChild(newConfirmBtn, modalConfirmBtn);
            modalConfirmBtn = newConfirmBtn; // Reassign to the new button

            modalConfirmBtn.onclick = () => { // Use onclick for simplicity here, or addEventListener
                confirmationModal.style.display = "none";
                if (typeof onConfirm === 'function') {
                    onConfirm();
                }
            };
        }


        function loadQuestion(index) {
            if (index < 0 || index >= quizData.length) return;

            const question = quizData[index];
            questionContainer.innerHTML = ''; // Clear previous question

            const questionText = document.createElement('h3');
            questionText.className = 'text-xl sm:text-2xl font-semibold mb-6 text-sky-200 no-select';
            questionText.textContent = `Q ${index + 1}: ${question.question}`;
            questionContainer.appendChild(questionText);

            const optionsList = document.createElement('div');
            optionsList.className = 'space-y-3';

            if (question.options && Array.isArray(question.options)) {
                question.options.forEach((option, optIndex) => {
                    const optionLabel = document.createElement('label');
                    optionLabel.className = 'block p-3 sm:p-4 border-2 border-slate-600 rounded-lg cursor-pointer transition-all duration-150 ease-in-out question-option no-select hover:border-sky-500';
                    
                    const radioButton = document.createElement('input');
                    radioButton.type = 'radio';
                    radioButton.name = `question-${index}`;
                    radioButton.value = option;
                    radioButton.className = 'mr-3 accent-sky-500';
                    
                    const uniqueRadioId = `option-${index}-${optIndex}`; // Ensure unique ID for radio
                    radioButton.id = uniqueRadioId;
                    optionLabel.htmlFor = uniqueRadioId; // Associate label with radio

                    radioButton.onchange = () => {
                        userAnswers[index] = option;
                        // Update visual selection
                        document.querySelectorAll(`input[name='question-${index}']`).forEach(rb => {
                            rb.parentElement.classList.remove('selected-option', 'border-sky-500');
                            rb.parentElement.classList.add('border-slate-600');
                        });
                        optionLabel.classList.add('selected-option', 'border-sky-500');
                        optionLabel.classList.remove('border-slate-600');
                    };

                    if (userAnswers[index] === option) {
                        radioButton.checked = true;
                        optionLabel.classList.add('selected-option', 'border-sky-500');
                        optionLabel.classList.remove('border-slate-600');
                    }
                    
                    optionLabel.appendChild(radioButton);
                    optionLabel.appendChild(document.createTextNode(option));
                    optionsList.appendChild(optionLabel);
                });
            }


            questionContainer.appendChild(optionsList);
            updateNavigationButtons();
            questionCounter.textContent = `Question ${index + 1} / ${quizData.length}`;
        }

        function updateNavigationButtons() {
            prevQuestionBtn.disabled = currentQuestionIndex === 0;
            nextQuestionBtn.disabled = currentQuestionIndex === quizData.length - 1;
            prevQuestionBtn.classList.toggle('opacity-50', prevQuestionBtn.disabled);
            prevQuestionBtn.classList.toggle('cursor-not-allowed', prevQuestionBtn.disabled);
            nextQuestionBtn.classList.toggle('opacity-50', nextQuestionBtn.disabled);
            nextQuestionBtn.classList.toggle('cursor-not-allowed', nextQuestionBtn.disabled);
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "00:00";
                    if (!quizSubmitted) { 
                        showConfirmationModal("Time's up! The quiz will be submitted automatically.", handleSubmitQuiz);
                    }
                }
            }, 1000);
        }

        function calculateResults() {
            let score = 0;
            let attempted = 0;
            userAnswers.forEach((answer, index) => {
                if (answer !== null) {
                    attempted++;
                    if (quizData[index] && answer === quizData[index].answer) {
                        score++;
                    }
                }
            });
            return { score, attempted };
        }

        function handleSubmitQuiz() {
            if (quizSubmitted) return; 
            quizSubmitted = true;

            clearInterval(timerInterval);
            const quizEndTime = new Date();
            const timeDiff = Math.floor((quizEndTime - quizStartTime) / 1000); 
            const minutesTaken = Math.floor(timeDiff / 60);
            const secondsTaken = timeDiff % 60;
            const timeTakenString = `${String(minutesTaken).padStart(2, '0')}:${String(secondsTaken).padStart(2, '0')}`;

            const { score, attempted } = calculateResults();

            resultName.textContent = studentFullName;
            resultAttempted.textContent = `${attempted} / ${quizData.length}`;
            resultScore.textContent = `${score} / ${attempted > 0 ? attempted : quizData.length}`;
            resultTimeTaken.textContent = timeTakenString;

            quizSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            resultsSection.classList.add('fade-in');
            timerDisplay.classList.add('hidden'); 

            formStudentName.value = studentFullName;
            formQuestionsAttempted.value = attempted;
            formScore.value = score;
            formTimeTaken.value = timeTakenString;
            
            fetch(hiddenForm.action, {
                method: hiddenForm.method,
                body: new FormData(hiddenForm),
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log("Form submitted successfully to Formspree!");
                } else {
                    response.json().then(data => {
                        if (Object.hasOwn(data, 'errors')) {
                            console.error("Formspree submission error:", data["errors"].map(error => error["message"]).join(", "));
                        } else {
                            console.error("Formspree submission error: An unknown error occurred.");
                        }
                    })
                }
            }).catch(error => {
                console.error("Error submitting form to Formspree:", error);
            });
        }
        
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) || (e.metaKey && e.altKey && (e.key === 'I' || e.key === 'J' || e.key === 'C'))) {
                e.preventDefault();
            }
        });

        // Initial setup
        prepareQuizData(); 
        timerDisplay.classList.remove('hidden'); 
        resultsSection.classList.add('hidden');
        quizSection.classList.add('hidden');
        nameEntrySection.classList.remove('hidden');

    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ FOR CSS ASPIRANTS 27 APRIL 2025 - SYED ASGHAR ALI SHAH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font globally */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-user-select: none; /* Safari */
            -moz-user-select: none; /* Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Standard syntax */
            /* Disable image dragging */
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }
        /* Custom styles for quiz elements */
        .quiz-option {
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
        }
        .quiz-option:hover {
            background-color: #e0f2fe; /* Light blue hover */
            border-color: #3b82f6; /* Blue border hover */
        }
        .quiz-option.selected {
            background-color: #bfdbfe; /* Darker blue selected */
            border-color: #2563eb; /* Darker blue border selected */
            font-weight: 600;
        }
        /* Hide scrollbar but allow scrolling */
         .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* Prevent image saving */
        img {
            pointer-events: none;
        }
        /* Ensure options don't overflow weirdly */
        .quiz-option {
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-100 to-blue-100 min-h-screen flex flex-col" oncontextmenu="return false;">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex flex-col sm:flex-row justify-between items-center">
            <div class="flex items-center space-x-3 mb-2 sm:mb-0">
                 <img src="https://media-hosting.imagekit.io//0b9a4af30efb4482/WhatsApp%20Image%202025-02-28%20at%203.15.19%20AM.jpeg?Expires=1835349432&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=jwJPYv24ynvpiPUADnh2kUGPUbG6OBggLpvXOj6~ZZAgts7lamWPTIZKmuIaQ5WaRUAG568acIjSbBE1XrKsIPvCHTXKNA-XF6ppaM~tacD0TMTVoTFd7-EsYFsesMaR~5AK7n5qr33hIwKVawluJ1rkdqmuQokM~T~W~O~6Yo-qXgYGio2IvfBsu1u~wEi1Cnk-5pAOavMUb9IfeY7E4FNwGBgiLCiHugKJD9sAY8As7S0szpehWI8WIQzMzNUFN4wvtPAamSART1m5nlUT4uLcvwdr-C1pk4kJN6I0itWzZEbZN04ANZexY3dpBhUDO0~UvQBCps64LPKIQBRYtA__"
                     alt="User Image"
                     class="h-12 w-12 rounded-full object-cover border-2 border-blue-500"
                     onerror="this.onerror=null; this.src='https://placehold.co/48x48/007bff/ffffff?text=SA';">
                 <span class="text-lg font-semibold text-gray-700">SYED ASGHAR ALI SHAH</span>
            </div>
            <h1 class="text-xl sm:text-2xl font-bold text-center text-blue-700">QUIZ FOR CSS ASPIRANTS 27 APRIL 2025</h1>
            <div id="timer-display" class="text-lg sm:text-xl font-semibold text-red-600 mt-2 sm:mt-0">Time Left: 25:00</div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 flex-grow">

        <section id="name-entry" class="max-w-lg mx-auto bg-white p-6 sm:p-8 rounded-lg shadow-lg text-center">
            <h2 class="text-2xl font-bold mb-6 text-gray-800">Advanced Grammar & Vocabulary Challenge</h2>
            <p class="text-gray-600 mb-6">Please enter your full name to begin this rigorous quiz.</p>
            <input type="text" id="student-name" placeholder="Enter your full name" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-6 text-lg" required>
            <button id="start-quiz-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md text-lg transition duration-300 ease-in-out transform hover:scale-105">
                Start Quiz
            </button>
        </section>

        <section id="quiz-section" class="hidden max-w-4xl mx-auto bg-white p-6 sm:p-8 rounded-lg shadow-xl">
            <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">CSS Aspirant Quiz - April 27</h2>
            <div id="question-container" class="mb-6">
                <p class="text-lg font-semibold text-gray-700 mb-2"><span id="question-number"></span> / 50</p>
                <p id="question-text" class="text-xl text-gray-800 mb-5 leading-relaxed"></p>
                <div id="options-container" class="space-y-3">
                    </div>
                 <div id="rearrangement-parts-display" class="hidden mt-4 p-3 bg-gray-100 rounded border border-gray-300 text-sm">
                     <p class="font-medium mb-2 text-gray-700">Rearrange these parts:</p>
                     <ul id="rearrangement-parts-list" class="list-disc list-inside"></ul>
                </div>
            </div>
            <div class="flex justify-between items-center mt-8">
                 <button id="prev-question-btn" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-5 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed">
                    Previous
                </button>
                <button id="next-question-btn" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-5 rounded-md transition duration-300 ease-in-out">
                    Next
                </button>
                <button id="submit-quiz-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-5 rounded-md transition duration-300 ease-in-out hidden">
                    Submit Quiz
                </button>
            </div>
        </section>

        <section id="results-section" class="hidden max-w-lg mx-auto bg-white p-6 sm:p-8 rounded-lg shadow-lg text-center mt-10">
            <h2 class="text-3xl font-bold mb-6 text-blue-700">Quiz Results</h2>
            <div class="space-y-4 text-lg text-gray-700">
                <p><strong class="font-semibold text-gray-800">Name:</strong> <span id="result-name"></span></p>
                <p><strong class="font-semibold text-gray-800">Time Taken:</strong> <span id="result-time"></span></p>
                <p><strong class="font-semibold text-gray-800">Questions Attempted:</strong> <span id="result-attempted"></span></p>
                <p><strong class="font-semibold text-gray-800">Correct Answers:</strong> <span id="result-score"></span> / 50</p>
                <p><strong class="font-semibold text-gray-800">Percentage:</strong> <span id="result-percentage"></span>%</p>
            </div>
             <p class="mt-6 text-sm text-gray-500">Your results have been submitted. Thank you for participating!</p>
        </section>

        <form id="results-form" action="https://formspree.io/f/xwpvddea" method="POST" class="hidden">
            <input type="text" name="name" id="form-name">
            <input type="text" name="time_taken" id="form-time">
            <input type="number" name="attempted" id="form-attempted">
            <input type="number" name="score" id="form-score">
            <input type="text" name="percentage" id="form-percentage">
            <input type="hidden" name="_subject" value="New Quiz Submission - CSS Aspirants April 27">
             <input type="text" name="_gotcha" style="display:none"> </form>

    </main>

    <footer class="bg-gray-800 text-white py-6 mt-12 shadow-inner">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">Need assistance or have questions?</p>
            <p class="mb-4 font-semibold text-lg">Contact: 03265762698</p>
            <p class="text-sm text-gray-400">&copy; 2025 SYED ASGHAR ALI SHAH - CSS Aspirant Resources. All rights reserved.</p>
             <p class="text-sm text-gray-500 mt-2">Designed for dedicated CSS Aspirants.</p>
        </div>
    </footer>

    <script>
        // --- Quiz Data (Derived from NEW PDFs - April 27 version) ---
        const quizData = [
            // --- Grammar: Parts of Speech ---
            {
                question: "In '...spiralling tension between the two nuclear-armed South Asian neighbours...', what part of speech is 'spiralling'?",
                options: ["Verb (Main)", "Adverb", "Noun (Gerund)", "Adjective (Present Participle)"],
                answer: "Adjective (Present Participle)",
                type: "mcq",
                explanation: "'Spiralling' modifies the noun 'tension', describing its nature. It's a present participle (-ing form) used as an adjective."
            },
            {
                question: "Identify the part of speech of 'whom' in '...both of whom ‘I am close to’...'.",
                options: ["Personal Pronoun", "Relative Pronoun", "Interrogative Pronoun", "Indefinite Pronoun"],
                answer: "Relative Pronoun",
                type: "mcq",
                explanation: "'Whom' introduces a dependent clause ('whom I am close to') and refers back to 'India and Pakistan'. It connects the clause to the antecedent."
            },
            {
                question: "What function does 'clear' serve in 'IT wasn’t clear if US President Donald Trump was using a figure of speech...'?",
                options: ["Adverb modifying 'wasn't'", "Noun object", "Adjective (Predicate Adjective)", "Verb"],
                answer: "Adjective (Predicate Adjective)",
                type: "mcq",
                explanation: "'Clear' follows the linking verb 'wasn't' and describes the implied subject 'IT'. It functions as a predicate adjective."
            },
            {
                question: "In the phrase '...several armed conflicts...', what part of speech is 'several'?",
                options: ["Adverb", "Noun", "Adjective (Determiner)", "Conjunction"],
                answer: "Adjective (Determiner)",
                type: "mcq",
                explanation: "'Several' modifies the noun 'conflicts' by indicating a non-specific quantity. Words like several, many, few function as determiners, a type of adjective."
            },
            {
                question: "What part of speech is 'belligerent' in '...the mood in India... was belligerent and jingoistic.'?",
                options: ["Noun", "Adverb", "Verb", "Adjective"],
                answer: "Adjective",
                type: "mcq",
                explanation: "'Belligerent' follows the linking verb 'was' and describes the noun 'mood'. It's a predicate adjective."
            },
            // --- Grammar: Prepositions ---
            {
                question: "Choose the correct preposition: 'He was responding ____ a question on the spiralling tension...'",
                options: ["for", "to", "with", "about"],
                answer: "to",
                type: "mcq",
                explanation: "The verb 'responding' typically takes the preposition 'to' when indicating what is being responded to."
            },
            {
                question: "Fill the blank: '...reduction ____ diplomatic staff at the Pakistan mission...'",
                options: ["in", "of", "for", "from"],
                answer: "of",
                type: "mcq",
                explanation: "The preposition 'of' is used to show what is being reduced – the diplomatic staff is part *of* the reduction."
            },
            {
                question: "Select the preposition: '...voices ____ sanity appear to be losing the battle...'",
                options: ["with", "for", "of", "in"],
                answer: "of",
                type: "mcq",
                explanation: "'Of' indicates the quality or characteristic possessed by the voices – voices characterized by sanity."
            },
            {
                question: "Complete the sentence: '...threat ____ humanity...'",
                options: ["for", "against", "to", "with"],
                answer: "to",
                type: "mcq",
                explanation: "The preposition 'to' indicates the target or recipient of the threat."
            },
            {
                question: "Which preposition fits here: '...allegations ____ Pakistani involvement...'?",
                options: ["about", "regarding", "of", "in"],
                answer: "of",
                type: "mcq",
                explanation: "'Of' is used to specify the subject matter or content of the allegations."
            },
            // --- Grammar: Verb Tenses, Voice, Mood ---
            {
                question: "What is the tense and voice of 'were killed' in '...in which 26 civilians were killed.'?",
                options: ["Simple Present Passive", "Simple Past Active", "Simple Past Passive", "Past Perfect Passive"],
                answer: "Simple Past Passive",
                type: "mcq",
                explanation: "The tense is Simple Past (indicated by 'were'). The voice is Passive because the subject 'civilians' received the action. Structure: Subject + was/were + Past Participle."
            },
            {
                question: "Identify the tense of 'has survived' in '...treaty... that has survived several armed conflicts...'.",
                options: ["Simple Past", "Present Perfect", "Past Perfect", "Simple Present"],
                answer: "Present Perfect",
                type: "mcq",
                explanation: "The Present Perfect tense (has + past participle 'survived') indicates an action that started in the past and continues to have relevance or effect in the present."
            },
            {
                question: "What is the voice of the main verb phrase 'would plan' in '...government... would surely plan a ‘kinetic’ operation...'?",
                options: ["Active", "Passive"],
                answer: "Active",
                type: "mcq",
                explanation: "The voice is Active because the subject 'government' performs the action 'would plan'."
            },
            {
                question: "The verb phrase 'can be evaluated' in '...allegations... can be evaluated and discarded...' is in which voice?",
                options: ["Active", "Passive"],
                answer: "Passive",
                type: "mcq",
                explanation: "The voice is Passive because the subject 'allegations' receives the action. Structure: Modal (can) + BE + Past Participle (evaluated)."
            },
            {
                question: "What mood is used in the clause 'if Pakistan had taken its probe...'?",
                options: ["Indicative", "Imperative", "Subjunctive", "Interrogative"],
                answer: "Subjunctive",
                type: "mcq",
                explanation: "This clause expresses a hypothetical or contrary-to-fact situation in the past (Pakistan did *not* take the probe to its conclusion). The use of the past perfect 'had taken' after 'if' to denote unreality is characteristic of the subjunctive mood."
            },
            // --- Grammar: Sentence Structure ---
            {
                question: "Classify the sentence: 'We await details of the conversations.'",
                options: ["Simple", "Compound", "Complex", "Compound-Complex"],
                answer: "Simple",
                type: "mcq",
                explanation: "This sentence contains one independent clause (Subject: 'We', Verb: 'await') and no dependent clauses."
            },
            {
                question: "What type of sentence is: 'The Saudi foreign minister has already talked to his counterparts in New Delhi and Islamabad, but we await details of the conversations.'?",
                options: ["Simple", "Compound", "Complex", "Compound-Complex"],
                answer: "Compound",
                type: "mcq",
                explanation: "This sentence contains two independent clauses joined by the coordinating conjunction 'but'."
            },
            {
                question: "Identify the sentence type: 'Whenever passions are running high, sanity tends to take a backseat.'",
                options: ["Simple", "Compound", "Complex", "Compound-Complex"],
                answer: "Complex",
                type: "mcq",
                explanation: "This sentence contains one dependent clause (starting with 'Whenever') and one independent clause ('sanity tends to take a backseat')."
            },
            {
                question: "What kind of clause is 'who commanded the corps in Kashmir' in '...asked a... general who commanded the corps in Kashmir...'?",
                options: ["Noun Clause", "Adverb Clause", "Independent Clause", "Adjective (Relative) Clause"],
                answer: "Adjective (Relative) Clause",
                type: "mcq",
                explanation: "The clause starts with the relative pronoun 'who' and modifies the noun 'general', providing more information about him."
            },
            {
                question: "The clause 'because there appears to be no dialogue mechanism' functions as what type of clause?",
                options: ["Noun Clause", "Adjective Clause", "Adverb Clause", "Independent Clause"],
                answer: "Adverb Clause",
                type: "mcq",
                explanation: "This clause starts with the subordinating conjunction 'because' and explains the reason *why* matters are exacerbated. It modifies the verb phrase 'are exacerbated'."
            },
            // --- Idioms & Vocabulary (From April 27 PDF) ---
            {
                question: "What does the phrase 'Hitting turbulence' mean?",
                options: ["Progressing easily", "Flying smoothly", "Experiencing difficulties or instability", "Avoiding problems"],
                answer: "Experiencing difficulties or instability",
                type: "mcq",
                explanation: "Similar to an airplane hitting rough air, this idiom means facing problems or instability."
            },
            {
                question: "Which is a synonym for 'Creeping back'?",
                options: ["Disappearing completely", "Vanishing suddenly", "Staying away", "Sneaking back"],
                answer: "Sneaking back",
                type: "mcq",
                explanation: "'Creeping back' implies a slow, subtle, often unwelcome return. 'Sneaking back' captures this sense."
            },
            {
                question: "The idiom 'Leaving the door wide open' suggests:",
                options: ["Preventing entry", "Securing a place", "Creating an opportunity for something (often negative)", "Closing off access"],
                answer: "Creating an opportunity for something (often negative)",
                type: "mcq",
                explanation: "This idiom means making something vulnerable or making it easy for something, often undesirable, to happen."
            },
            {
                question: "What does 'Rife (with)' mean?",
                options: ["Lacking", "Devoid of", "Scarce", "Full of something undesirable"],
                answer: "Full of something undesirable",
                type: "mcq",
                explanation: "If a place or situation is 'rife with' something bad, it is widespread or abundant there."
            },
            {
                question: "To 'Validate the worst suspicions' means to:",
                options: ["Disprove fears", "Alleviate concerns", "Build trust", "Confirm the most negative beliefs"],
                answer: "Confirm the most negative beliefs",
                type: "mcq",
                explanation: "It means providing evidence that confirms the most negative or fearful assumptions someone had."
            },
            {
                question: "What is the meaning of 'Seized on'?",
                options: ["Ignored", "Overlooked", "Disregarded", "Exploited or grabbed eagerly"],
                answer: "Exploited or grabbed eagerly",
                type: "mcq",
                explanation: "To 'seize on' something means to quickly take advantage of it, often an opportunity or an excuse."
            },
            {
                question: "Being 'On the front lines' means being:",
                options: ["Behind the scenes", "In the background", "Safe from harm", "In the most important or dangerous position"],
                answer: "In the most important or dangerous position",
                type: "mcq",
                explanation: "This phrase refers to being in the most active, direct, and often riskiest part of an activity or conflict."
            },
            {
                question: "Choose the antonym for 'Dispel myths'.",
                options: ["Debunk", "Refute", "Disprove", "Spread myths"],
                answer: "Spread myths",
                type: "mcq",
                explanation: "'Dispel myths' means to prove them false. The opposite is to 'spread myths' or perpetuate falsehoods."
            },
            {
                question: "What does it mean if someone has 'Overplayed its hand'?",
                options: ["Played cautiously", "Underestimated", "Held back", "Overestimated one's strength, leading to loss"],
                answer: "Overestimated one's strength, leading to loss",
                type: "mcq",
                explanation: "This idiom means someone was too confident in their position or power and took excessive risks, resulting in a worse outcome."
            },
            {
                question: "A 'Flare-up' refers to:",
                options: ["Calm", "Resolution", "Abatement", "A sudden outburst or worsening"],
                answer: "A sudden outburst or worsening",
                type: "mcq",
                explanation: "A 'flare-up' is a sudden recurrence or intensification of conflict, violence, or illness."
            },
            {
                question: "What does 'Much at stake' imply?",
                options: ["Little risk", "Low stakes", "Nothing to lose", "Significant risk involved"],
                answer: "Significant risk involved",
                type: "mcq",
                explanation: "If there is 'much at stake', it means there is a lot to be potentially lost or gained; the risks are high."
            },
            {
                question: "The 'State's wrath' means:",
                options: ["State approval", "Government support", "Official pardon", "Extreme anger or punishment from the government"],
                answer: "Extreme anger or punishment from the government",
                type: "mcq",
                explanation: "'Wrath' means extreme anger, so the 'state's wrath' refers to severe anger or retribution from the authorities."
            },
            {
                question: "If support 'Refused to wane', it means it:",
                options: ["Decreased", "Faded", "Diminished", "Persisted strongly"],
                answer: "Persisted strongly",
                type: "mcq",
                explanation: "'Wane' means to decrease or fade. If something refused to wane, it continued strongly without diminishing."
            },
            {
                question: "To 'Break the resolve' means to:",
                options: ["Strengthen resolve", "Encourage", "Bolster determination", "Destroy determination or willpower"],
                answer: "Destroy determination or willpower",
                type: "mcq",
                explanation: "To 'break someone's resolve' means to overcome their firm determination or willpower."
            },
            {
                question: "'Time is of the essence' indicates that:",
                options: ["There is plenty of time", "There is no rush", "Speed is crucial", "You should take your time"],
                answer: "Speed is crucial",
                type: "mcq",
                explanation: "This idiom emphasizes that speed and promptness are very important because time is limited."
            },
            {
                question: "The 'Pull of emotional hysteria' refers to the influence of:",
                options: ["Rationality", "Calmness", "Reason", "Irrational, uncontrolled emotion"],
                answer: "Irrational, uncontrolled emotion",
                type: "mcq",
                explanation: "'Hysteria' involves excessive, uncontrolled emotion. The 'pull' refers to its strong, often irrational, influence."
            },
            {
                question: "What does it mean if someone is 'Sidelined'?",
                options: ["Promoted", "Included", "Centered", "Moved to a position of less importance"],
                answer: "Moved to a position of less importance",
                type: "mcq",
                explanation: "To be 'sidelined' means to be removed from the center of activity or influence; marginalized."
            },
            {
                question: "To 'Play a role' means to:",
                options: ["Be uninvolved", "Have no influence", "Stay out", "Contribute or influence"],
                answer: "Contribute or influence",
                type: "mcq",
                explanation: "To 'play a role' in something means to participate in it or have some function or influence."
            },
            {
                question: "What are 'Bridge-builders'?",
                options: ["Dividers", "Instigators", "Agitators", "People who connect opposing groups"],
                answer: "People who connect opposing groups",
                type: "mcq",
                explanation: "'Bridge-builders' are individuals who work to create understanding and connection between groups or ideas that are in opposition."
            },
            {
                question: "To 'Derail the debate' means to:",
                options: ["Focus the debate", "Advance discussion", "Facilitate conversation", "Divert a discussion from its main topic"],
                answer: "Divert a discussion from its main topic",
                type: "mcq",
                explanation: "Like a train going off its tracks, 'derailing a debate' means causing it to move away from its intended subject."
            },
            // --- Sentence Rearrangement (Based on new PDFs) ---
            {
                question: "Rearrange into a coherent sentence: (A) appears to be / (B) because there / (C) Matters are exacerbated / (D) no dialogue mechanism",
                options: ["C B A D", "B A D C", "C D A B", "A B C D"],
                answer: "C B A D", // Matters are exacerbated because there appears to be no dialogue mechanism.
                type: "rearrangement_mcq",
                parts: {"A": "appears to be", "B": "because there", "C": "Matters are exacerbated", "D": "no dialogue mechanism"}
            },
            {
                question: "Form a logical sentence: (A) haven't received even one dose / (B) Zero-dose children / (C) of a basic vaccine / (D) are children who",
                options: ["B C D A", "D A B C", "B D A C", "A C B D"],
                answer: "B D A C", // Zero-dose children are children who haven't received even one dose of a basic vaccine.
                type: "rearrangement_mcq",
                parts: {"A": "haven't received even one dose", "B": "Zero-dose children", "C": "of a basic vaccine", "D": "are children who"}
            },
            {
                question: "Arrange these parts correctly: (A) where trust between / (B) A breakdown in trust / (C) has been destroyed / (D) people or groups / (E) is a situation",
                options: ["B E A D C", "A D C B E", "B A D C E", "E A B D C"],
                answer: "B E A D C", // A breakdown in trust is a situation where trust between people or groups has been destroyed.
                type: "rearrangement_mcq",
                parts: {"A": "where trust between", "B": "A breakdown in trust", "C": "has been destroyed", "D": "people or groups", "E": "is a situation"}
            },
            {
                question: "Create a meaningful sentence: (A) from its main topic / (B) To derail the debate / (C) often intentionally / (D) is to divert a discussion",
                options: ["B C D A", "B D A C", "D A B C", "A C B D"],
                answer: "B D A C", // To derail the debate is to divert a discussion from its main topic, often intentionally. (Note: 'often intentionally' can also fit at the end)
                type: "rearrangement_mcq",
                parts: {"A": "from its main topic", "B": "To derail the debate", "C": "often intentionally", "D": "is to divert a discussion"}
            },
            {
                question: "Rearrange the following: (A) or phrase used / (B) Figure of speech / (C) for rhetorical or vivid effect / (D) is a word / (E) in a non-literal sense",
                options: ["B D A E C", "D A E C B", "B E A D C", "A E C B D"],
                answer: "B D A E C", // Figure of speech is a word or phrase used in a non-literal sense for rhetorical or vivid effect.
                type: "rearrangement_mcq",
                parts: {"A": "or phrase used", "B": "Figure of speech", "C": "for rhetorical or vivid effect", "D": "is a word", "E": "in a non-literal sense"}
            }
        ];


        // --- DOM Elements ---
        const nameEntrySection = document.getElementById('name-entry');
        const quizSection = document.getElementById('quiz-section');
        const resultsSection = document.getElementById('results-section');
        const studentNameInput = document.getElementById('student-name');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const questionContainer = document.getElementById('question-container');
        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const rearrangementPartsDisplay = document.getElementById('rearrangement-parts-display');
        const rearrangementPartsList = document.getElementById('rearrangement-parts-list');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const prevQuestionBtn = document.getElementById('prev-question-btn');
        const submitQuizBtn = document.getElementById('submit-quiz-btn');
        const timerDisplay = document.getElementById('timer-display');
        const resultNameEl = document.getElementById('result-name');
        const resultTimeEl = document.getElementById('result-time');
        const resultAttemptedEl = document.getElementById('result-attempted');
        const resultScoreEl = document.getElementById('result-score');
        const resultPercentageEl = document.getElementById('result-percentage');
        const resultsForm = document.getElementById('results-form');
        const formName = document.getElementById('form-name');
        const formTime = document.getElementById('form-time');
        const formAttempted = document.getElementById('form-attempted');
        const formScore = document.getElementById('form-score');
        const formPercentage = document.getElementById('form-percentage');

        // --- Quiz State ---
        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let score = 0;
        let timerInterval;
        let timeLeft = 25 * 60; // 25 minutes in seconds
        let startTime;
        let endTime;
        let studentName = '';

        // --- Utility Functions ---
        function shuffleArray(array) {
            // Fisher-Yates (aka Knuth) Shuffle
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
        }

        // Shuffle options for each MCQ/Rearrangement question *before* starting
        quizData.forEach(q => {
            if (q.options && Array.isArray(q.options)) {
                 const correctAnswerValue = q.answer; // Store the correct answer value
                 shuffleArray(q.options); // Shuffle the options array in place
                 q.answer = correctAnswerValue; // Ensure the answer key still points to the correct value
            }
        });


        // --- Event Listeners ---
        startQuizBtn.addEventListener('click', startQuiz);
        nextQuestionBtn.addEventListener('click', nextQuestion);
        prevQuestionBtn.addEventListener('click', prevQuestion);
        submitQuizBtn.addEventListener('click', submitQuiz);

        // Prevent context menu (right-click)
        document.addEventListener('contextmenu', event => event.preventDefault());

        // Optional: Disable specific keys like F12 (Inspect Element)
        document.addEventListener('keydown', event => {
            if (event.key === 'F12' || (event.ctrlKey && event.shiftKey && (event.key === 'I' || event.key === 'i')) || (event.ctrlKey && event.shiftKey && (event.key === 'J' || event.key === 'j')) || (event.ctrlKey && (event.key === 'U' || event.key === 'u'))) {
                event.preventDefault();
            }
             // Disable Ctrl+C, Ctrl+X, Ctrl+A
            if (event.ctrlKey && (event.key === 'c' || event.key === 'x' || event.key === 'a')) {
                 event.preventDefault();
            }
        });


        // --- Quiz Logic ---
        function startQuiz() {
            studentName = studentNameInput.value.trim();
            if (studentName === "") {
                alert("Please enter your name to start the quiz.");
                return;
            }
            nameEntrySection.classList.add('hidden');
            quizSection.classList.remove('hidden');
            startTime = new Date();
            startTimer();
            displayQuestion(currentQuestionIndex);
            updateNavigationButtons(); // Initial button state
        }

        function displayQuestion(index) {
            const question = quizData[index];
            questionNumberEl.textContent = index + 1;
            questionTextEl.textContent = question.question;
            optionsContainer.innerHTML = ''; // Clear previous options
            rearrangementPartsDisplay.classList.add('hidden'); // Hide rearrangement parts by default
            rearrangementPartsList.innerHTML = ''; // Clear previous parts list

            if (question.type === 'mcq' || question.type === 'rearrangement_mcq') {
                // Display parts list for rearrangement questions
                if (question.type === 'rearrangement_mcq' && question.parts) {
                    rearrangementPartsDisplay.classList.remove('hidden');
                    for (const key in question.parts) {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `<strong>(${key})</strong> ${question.parts[key]}`;
                        rearrangementPartsList.appendChild(listItem);
                    }
                }

                // Display options (shuffled during initialization)
                question.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('block', 'w-full', 'text-left', 'p-3', 'border', 'border-gray-300', 'rounded-md', 'quiz-option', 'text-gray-700', 'hover:bg-blue-100', 'hover:border-blue-400');
                    button.onclick = () => selectAnswer(index, option, button);

                    // If an answer was previously selected for this question, highlight it
                    if (userAnswers[index] === option) {
                        button.classList.add('selected');
                    }
                    optionsContainer.appendChild(button);
                });
            }

            updateNavigationButtons();
        }


        function selectAnswer(index, answer, selectedButton) {
            // Deselect previously selected option for this question
            const previouslySelected = optionsContainer.querySelector('.selected');
            if (previouslySelected) {
                previouslySelected.classList.remove('selected');
            }

            // Select the new option
            selectedButton.classList.add('selected');
            userAnswers[index] = answer; // Store the selected option value/text

            // Optional: Automatically move to the next question after a brief delay
            // setTimeout(nextQuestion, 300);
        }


        function updateNavigationButtons() {
            prevQuestionBtn.disabled = currentQuestionIndex === 0;
            if (currentQuestionIndex === quizData.length - 1) {
                nextQuestionBtn.classList.add('hidden');
                submitQuizBtn.classList.remove('hidden');
            } else {
                nextQuestionBtn.classList.remove('hidden');
                submitQuizBtn.classList.add('hidden');
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            }
        }

        function prevQuestion() {
             if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }


        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `Time Left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    submitQuiz(); // Submit automatically
                }
            }, 1000);
        }

        function submitQuiz() {
            if (timerInterval) { // Check if timer is still running
                 clearInterval(timerInterval); // Stop the timer if manually submitted
            }
            endTime = new Date();

            // Disable all quiz buttons after submission
            const buttons = quizSection.querySelectorAll('button');
            buttons.forEach(button => button.disabled = true);
            optionsContainer.querySelectorAll('.quiz-option').forEach(opt => opt.onclick = null); // Remove click handlers


            calculateResults();

            quizSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');
            timerDisplay.classList.add('hidden'); // Hide timer on results page

            // Populate and submit the hidden form
            populateAndSubmitForm();
        }

        function calculateResults() {
            score = 0;
            let attemptedCount = 0;
            quizData.forEach((question, index) => {
                if (userAnswers[index] !== null) {
                    attemptedCount++;
                    // Check if the stored answer matches the correct answer value
                    if (userAnswers[index] === question.answer) {
                        score++;
                    }
                }
            });

            const timeTaken = Math.round((endTime - startTime) / 1000); // Time in seconds
            const minutesTaken = Math.floor(timeTaken / 60);
            const secondsTaken = timeTaken % 60;
            const timeTakenFormatted = `${minutesTaken} min ${secondsTaken} sec`;
            const percentage = (quizData.length > 0) ? ((score / quizData.length) * 100).toFixed(1) : 0;

            // Display results
            resultNameEl.textContent = studentName;
            resultTimeEl.textContent = timeTakenFormatted;
            resultAttemptedEl.textContent = attemptedCount;
            resultScoreEl.textContent = score;
            resultPercentageEl.textContent = percentage;

            // Store for form submission
             formName.value = studentName;
             formTime.value = timeTakenFormatted;
             formAttempted.value = attemptedCount;
             formScore.value = score;
             formPercentage.value = percentage;
        }

         function populateAndSubmitForm() {
            // Values are already set in calculateResults()
            // Add a small delay before submitting to ensure values are populated
            setTimeout(() => {
                 resultsForm.submit();
                 console.log("Submitting form to Formspree..."); // For debugging
            }, 100);
        }

    </script>

</body>
</html>
